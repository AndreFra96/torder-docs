
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://torder.newchurchill.eu/rinnovi/annuali/rinnovo/" rel="canonical"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-8.5.10" name="generator"/>
<title>Rinnovo - T-Order Docs</title>
<link href="../../../assets/stylesheets/main.975780f9.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.2505c338.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../stylesheets/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="" data-md-color-primary="" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#rinnovo">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="T-Order Docs" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="T-Order Docs">
<img alt="logo" src="../../../assets/t-order-white.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            T-Order Docs
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Rinnovo
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Attiva dark mode" class="md-option" data-md-color-accent="" data-md-color-media="" data-md-color-primary="" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Attiva dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m3.55 19.09 1.41 1.41 1.8-1.79-1.42-1.42M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6c0-3.32-2.69-6-6-6m8 7h3v-2h-3m-2.76 7.71 1.8 1.79 1.41-1.41-1.79-1.8M20.45 5l-1.41-1.4-1.8 1.79 1.42 1.42M13 1h-2v3h2M6.76 5.39 4.96 3.6 3.55 5l1.79 1.81 1.42-1.42M1 13h3v-2H1m12 9h-2v3h2"></path></svg>
</label>
<input aria-label="Disattiva dark mode" class="md-option" data-md-color-accent="" data-md-color-media="" data-md-color-primary="" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Disattiva dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M2 12a10 10 0 0 0 13 9.54 10 10 0 0 1 0-19.08A10 10 0 0 0 2 12Z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/AndreFra96/torder-docs" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../..">
        Home
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../introduzione/">
        Introduzione
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../ordini/">
        Ordini
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../../">
        Rinnovi
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../integrazioni/">
      Integrazioni
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../analisi/">
        Analisi
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../autenticazione/">
        Autenticazione
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../esempi/">
      Esempi
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../demo/">
      Demo
    </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="T-Order Docs" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="T-Order Docs">
<img alt="logo" src="../../../assets/t-order-white.png"/>
</a>
    T-Order Docs
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/AndreFra96/torder-docs" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_1" id="__nav_1" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../..">Home</a>
</div>
<nav aria-label="Home" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
          Home
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../introduzione/">Introduzione</a>
</div>
<nav aria-label="Introduzione" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          Introduzione
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../ordini/">Ordini</a>
<label for="__nav_3">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Ordini" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Ordini
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ordini/tabelle_coinvolte/">
        Tabelle Coinvolte
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ordini/informazioni_ordine/">
        Informazioni Ordine
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ordini/ciclo_ordine/">
        Ciclo Ordine
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../">Rinnovi</a>
<label for="__nav_4">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Rinnovi" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Rinnovi
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" id="__nav_4_2" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../">Annuali/Biennali/31-12</a>
<label for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Annuali/Biennali/31-12" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
          Annuali/Biennali/31-12
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../generazione/">
        Generazione Rinnovo
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configurazione/">
        Configurazione
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../disdetta/">
        Disdetta
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../inserimento/">
        Inserimento nuovi articoli
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cambio/">
        Cambio Piano
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Rinnovo
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Rinnovo
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-controllo-iniziale">
    1. Controllo iniziale
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-salvataggio-storico">
    2. Salvataggio storico
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-invio-a-trace">
    3. Invio a trace
  </a>
<nav aria-label="3. Invio a trace" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#note-tecniche">
    Note tecniche
  </a>
<nav aria-label="Note tecniche" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#percorso-classico">
    Percorso classico
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#percorso-alternativo">
    Percorso alternativo
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-generazione-ordine-e-fattura">
    4. Generazione ordine e fattura
  </a>
<nav aria-label="4. Generazione ordine e fattura" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#generazione-ordine-da-rinnovo">
    Generazione ordine da rinnovo
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#generazione-fattura">
    Generazione fattura
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#note-tecniche_1">
    Note tecniche
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5-chiusura-rinnovo">
    5. Chiusura rinnovo
  </a>
<nav aria-label="5. Chiusura rinnovo" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#note-tecniche_2">
    Note tecniche
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6-import-nuove-scadenze">
    6. Import nuove scadenze
  </a>
<nav aria-label="6. Import nuove scadenze" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#note-tecniche_3">
    Note tecniche
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../mensili-trimestrali-semestrali/">
        Mensili/Trimestrali/Semestrali
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../integrazioni/">
        Integrazioni
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6" id="__nav_6" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../analisi/">Analisi</a>
<label for="__nav_6">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Analisi" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          Analisi
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6_2" id="__nav_6_2" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../analisi/database/">Database</a>
<label for="__nav_6_2">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Database" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_2">
<span class="md-nav__icon md-icon"></span>
          Database
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../analisi/database/schema/">
        Schema
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../analisi/database/er/">
        Diagramma ER
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6_3" id="__nav_6_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../analisi/backend/">Backend</a>
<label for="__nav_6_3">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Backend" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_3">
<span class="md-nav__icon md-icon"></span>
          Backend
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../analisi/backend/struttura/">
        Struttura
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6_3_3" id="__nav_6_3_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../analisi/backend/funzionalita/">Funzionalità</a>
<label for="__nav_6_3_3">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Funzionalità" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_6_3_3">
<span class="md-nav__icon md-icon"></span>
          Funzionalità
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6_3_3_2" id="__nav_6_3_3_2" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../analisi/backend/funzionalita/crud/">CRUD</a>
<label for="__nav_6_3_3_2">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="CRUD" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_6_3_3_2">
<span class="md-nav__icon md-icon"></span>
          CRUD
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../analisi/backend/funzionalita/crud/query/">
        Query
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../analisi/backend/funzionalita/logiche-business/">
        Logiche di Business
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6_3_3_4" id="__nav_6_3_3_4" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../analisi/backend/funzionalita/servizi/">Servizi Aggiuntivi</a>
<label for="__nav_6_3_3_4">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Servizi Aggiuntivi" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_6_3_3_4">
<span class="md-nav__icon md-icon"></span>
          Servizi Aggiuntivi
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../analisi/backend/funzionalita/servizi/mail/">
        Mail
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../analisi/backend/funzionalita/servizi/pdf/">
        PDF
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../analisi/backend/funzionalita/servizi/file/">
        File Manager
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../analisi/backend/funzionalita/servizi/ospiti/">
        Ospiti
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../analisi/frontend/">
        Frontend
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../analisi/sdk/">
        Javascript SDK
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../autenticazione/">
        Autenticazione
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_7" id="__nav_7" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../autenticazione/">Autenticazione</a>
<label for="__nav_7">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Autenticazione" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
          Autenticazione
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../autenticazione/auth0-config/">
        Configurazione Auth0
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_7_3" id="__nav_7_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../autenticazione/utenti/">Utenti</a>
<label for="__nav_7_3">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Utenti" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_3">
<span class="md-nav__icon md-icon"></span>
          Utenti
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../autenticazione/utenti/generazione-utente/">
        Generazione Utente
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../autenticazione/utenti/privilegi-ruoli/">
        Privilegi e Ruoli
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../esempi/">
        Esempi
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../demo/">
        Demo
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-controllo-iniziale">
    1. Controllo iniziale
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-salvataggio-storico">
    2. Salvataggio storico
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-invio-a-trace">
    3. Invio a trace
  </a>
<nav aria-label="3. Invio a trace" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#note-tecniche">
    Note tecniche
  </a>
<nav aria-label="Note tecniche" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#percorso-classico">
    Percorso classico
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#percorso-alternativo">
    Percorso alternativo
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-generazione-ordine-e-fattura">
    4. Generazione ordine e fattura
  </a>
<nav aria-label="4. Generazione ordine e fattura" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#generazione-ordine-da-rinnovo">
    Generazione ordine da rinnovo
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#generazione-fattura">
    Generazione fattura
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#note-tecniche_1">
    Note tecniche
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5-chiusura-rinnovo">
    5. Chiusura rinnovo
  </a>
<nav aria-label="5. Chiusura rinnovo" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#note-tecniche_2">
    Note tecniche
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6-import-nuove-scadenze">
    6. Import nuove scadenze
  </a>
<nav aria-label="6. Import nuove scadenze" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#note-tecniche_3">
    Note tecniche
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/AndreFra96/torder-docs/tree/main/docs/rinnovi/annuali/rinnovo.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"></path></svg>
</a>
<h1 id="rinnovo">Rinnovo</h1>
<p>Ogni rinnovo può essere confermato (rinnovato), la conferma di un rinnovo consiste in:</p>
<h2 id="1-controllo-iniziale">1. Controllo iniziale</h2>
<p>Prima di effettuare il rinnovo viene controllato che:</p>
<ul>
<li>Il rinnovo non sia completato</li>
<li>Il rinnovo abbia un cliente valido</li>
<li>Il rinnovo abbia un locale valido</li>
<li>Il rinnovo abbia un metodo di pagamento valido</li>
</ul>
<p>Se almeno una di queste condizioni non è verificata viene restituito un messaggio di errore e il rinnovo non viene confermato.</p>
<h2 id="2-salvataggio-storico">2. Salvataggio storico</h2>
<p>Viene salvata una copia di ogni articolo del rinnovo all'interno di una specifica tabella dedicata allo storico, per future estrazioni di dati e statistiche</p>
<h2 id="3-invio-a-trace">3. Invio a trace</h2>
<p>In questa fase i dati del rinnovo vengono sincronizzati con trace, in particolare avviene:</p>
<ul>
<li>Modifica delle date di scadenza degli articoli nella scheda cliente di trace</li>
<li>Importazione degli articoli che erano stati inseriti tramite <a href="../inserimento">inserimento nuovi articoli</a></li>
<li>Invio delle modifiche di prezzo o matricola degli articoli del rinnovo</li>
<li>Creazione dell'intervento per gli articoli configurati con 'crea intervento'</li>
</ul>
<h3 id="note-tecniche">Note tecniche</h3>
<dl>
<dt><code>Calcolo della nuova data di scadenza</code></dt>
<dd>
<p>La nuova data di scadenza viene calcolata per ogni articolo basandosi sulla scadenza attuale e il tipo di articolo, se l'articolo è annuale o al 31/12 viene aggiunto un anno alla data di scadenza se invece è biennale vengono aggiunti due anni</p>
</dd>
</dl>
<p>Dopo la prima fase comune di calcolo della nuova scadenza l'import in trace prende due percorsi diversi, quello classico se l'articolo è stato importato tramite <a href="../generazione">generazione rinnovo</a> e uno alternativo se è stato inserito tramite <a href="../inserimento">inserimento nuovi articoli</a>:</p>
<h4 id="percorso-classico">Percorso classico</h4>
<p>Il percorso classico prevede che l'articolo sia già presente in trace e consiste quindi in una modifica del record relativo a quell'articolo nella tabella di scambio.</p>
<p>Ogni articolo di un rinnovo conserva l'id del record della tabella di scambio dalla quale proviene, viene quindi effettuata una query di update nella tabella di scambio per il record corrispondente con i seguenti parametri:</p>
<div class="highlight"><pre><span></span><code>{
    price, (prezzo aggiornato)
    serial_number, (matricola aggiornata)
    due_date_maintenance, (scadenza calcolata)
    date_import_trace: null, (impostato a null per forzare trace a leggere nuovamente il record)
    date_import_rinnovi: null (impostato a null per importare il prossimo rinnovo)
    create_operation (generazione dell'intervento, in base all'articolo)
}
</code></pre></div>
<h4 id="percorso-alternativo">Percorso alternativo</h4>
<p>Il percorso alternativo prevede che l'articolo sia stato inserito direttamente all'interno del rinnovo e che quindi ancora non esista un record ad esso collegato nella tabella di scambio, è necessario quindi effettuare una query di insert nella tabella di scambio con i seguenti parametri:</p>
<div class="highlight"><pre><span></span><code>{
  order_type_id: 15, (il tipo 15 è riconosciuto da trace come rinnovo)
  customer_for_billing, (cliente per la fatturazione alternativa)
  customer_id, (cliente)
  prg_location, (locale)
  article_id, (articolo)
  price, (prezzo)
  serial_number, (matricola)
  installation_date: now(), (data di installazione impostata al momento attuale)
  due_date_maintenance, (scadenza calcolata)
  type_billing, (tipo di fatturazione)
  payment_type, (metodo di pagamento)
  create_operation (generazione dell'intervento, in base all'articolo)
}
</code></pre></div>
<h2 id="4-generazione-ordine-e-fattura">4. Generazione ordine e fattura</h2>
<p>In seguito alla conferma di un rinnovo viene generato un ordine in stato evaso, da questo ordine viene generata la fattura nel software di contabilità.</p>
<h3 id="generazione-ordine-da-rinnovo">Generazione ordine da rinnovo</h3>
<p>La conversione di un rinnovo in ordine avviene in questo modo:</p>
<ul>
<li>Viene generato un ordine di tipo rinnovo, in stato evaso con lo stesso cliente e lo stesso locale del rinnovo</li>
<li>Se presente viene impostato il cliente per la fatturazione alternativa basandosi sui dati contenuti nella <a href="../configurazione">configurazione rinnovo locale</a></li>
<li>Vengono inserite nel campo note amministrative le note contenute nella <a href="../configurazione">configurazione rinnovo locale</a></li>
<li>Viene impostato il metodo di pagamento dell'ordine basandosi sul metodo di pagamento impostato nella <a href="../configurazione">configurazione rinnovo locale</a></li>
<li>Vengono generati gli articoli dell'ordine raggruppando gli articoli del rinnovo per articolo, prezzo e sconto (lo sconto viene convertito da cifra a percentuale)</li>
</ul>
<h3 id="generazione-fattura">Generazione fattura</h3>
<p>Dal momento in cui l'ordine viene creato viene reso disponibile al software di contabilità per la generazione della fattura, una volta generata la fattura viene scritto il numero di fattura all'interno dell'ordine.</p>
<h3 id="note-tecniche_1">Note tecniche</h3>
<h2 id="5-chiusura-rinnovo">5. Chiusura rinnovo</h2>
<p>A questo punto il rinnovo viene chiuso e non è più visibile.</p>
<h3 id="note-tecniche_2">Note tecniche</h3>
<p>La chiusura del rinnovo consiste nell'eliminazione di tutti gli articolo_rinnovo e nell'impostazione del campo completato del rinnovo a 1</p>
<h2 id="6-import-nuove-scadenze">6. Import nuove scadenze</h2>
<p>A questo punto viene generato il nuovo rinnovo con le scadenze aggiornate.</p>
<h3 id="note-tecniche_3">Note tecniche</h3>
<p>La generazione del nuovo rinnovo avviene tramite la classica procedura di <a href="../generazione">generazione rinnovo</a> poichè in fase di <a href="#3-invio-a-trace">invio a trace</a> è stato impostato a null il campo 'date_import_rinnovi' viene letto come un qualsiasi nuovo rinnovo</p>
</article>
</div>
</div>
<a class="md-top md-icon" data-md-component="top" hidden="" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
            Back to top
          </a>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Cambio Piano" class="md-footer__link md-footer__link--prev" href="../cambio/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Cambio Piano
            </div>
</div>
</a>
<a aria-label="Next: Mensili/Trimestrali/Semestrali" class="md-footer__link md-footer__link--next" href="../../mensili-trimestrali-semestrali/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              Mensili/Trimestrali/Semestrali
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2019 - 2022 Andrea Brioschi
    </div>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/AndreFra96" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.top", "navigation.indexes", "navigation.expand"], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
<script src="../../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
</body>
</html>